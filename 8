#include <stdio.h>
#include <stdlib.h>

struct emp {
    int ssn;
    char name[30];
    char dept[20];
    char desig[20];
    int sal;
    char phno[15];
    struct emp *llink;
    struct emp *rlink;
};

typedef struct emp NODE;
NODE *start = NULL;

// Create DLL using end insertion
void create() {
    int n;
    NODE *p, *temp;

    printf("Enter number of employees: ");
    scanf("%d", &n);

    for (int i = 0; i < n; i++) {
        p = (NODE *)malloc(sizeof(NODE));

        printf("Enter SSN, Name, Dept, Designation, Salary, Phone:\n");
        scanf("%d %s %s %s %d %s",
              &p->ssn, p->name, p->dept, p->desig, &p->sal, p->phno);

        p->llink = p->rlink = NULL;

        if (start == NULL) {
            start = p;
        } else {
            temp = start;
            while (temp->rlink != NULL)
                temp = temp->rlink;

            temp->rlink = p;
            p->llink = temp;
        }
    }
}

// Display DLL and count nodes
void display() {
    NODE *temp = start;
    int count = 0;

    if (temp == NULL) {
        printf("DLL is Empty\n");
        return;
    }

    printf("\nDLL Contents:\n");
    while (temp != NULL) {
        printf("%d %s %s %s %d %s\n",
               temp->ssn, temp->name, temp->dept,
               temp->desig, temp->sal, temp->phno);
        temp = temp->rlink;
        count++;
    }
    printf("Total nodes = %d\n", count);
}

// Insert at front
void insert_front() {
    NODE *p;

    p = (NODE *)malloc(sizeof(NODE));
    printf("Enter SSN, Name, Dept, Designation, Salary, Phone:\n");
    scanf("%d %s %s %s %d %s",
          &p->ssn, p->name, p->dept, p->desig, &p->sal, p->phno);

    p->llink = NULL;
    p->rlink = start;

    if (start != NULL)
        start->llink = p;

    start = p;
}

// Delete at front
void delete_front() {
    NODE *temp;

    if (start == NULL) {
        printf("DLL is Empty\n");
        return;
    }

    temp = start;
    printf("Deleted employee SSN: %d\n", temp->ssn);

    start = start->rlink;
    if (start != NULL)
        start->llink = NULL;

    free(temp);
}

int main() {
    int choice;

    while (1) {
        printf("\n--- DLL MENU ---\n");
        printf("1. Create\n");
        printf("2. Display\n");
        printf("3. Insert Front\n");
        printf("4. Delete Front\n");
        printf("5. Exit\n");
        printf("Enter choice: ");
        scanf("%d", &choice);

        switch (choice) {
            case 1: create(); break;
            case 2: display(); break;
            case 3: insert_front(); break;
            case 4: delete_front(); break;
            case 5: return 0;
            default: printf("Invalid choice\n");
        }
    }
}
